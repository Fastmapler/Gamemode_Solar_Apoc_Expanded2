$EOTW::ItemCrafting["advAmmoPistolItem"] = (16 TAB "Iron") TAB (8 TAB "Copper"); //BaseWep Cost: 1x Iron, 1x Copper, 1x Lead
$EOTW::ItemCrafting["advAmmoRevolverItem"] = (12 TAB "Lead") TAB (14 TAB "Gold"); //BaseWep Cost: 2x Iron, 1x Lead, 1x Silver
$EOTW::ItemCrafting["advAmmoShotgunItem"] = (24 TAB "Lead") TAB (7 TAB "Gold"); //BaseWep Cost: 4x Wood, 1x Iron, 2x Gold
$EOTW::ItemCrafting["advAmmoMachineRifleItem"] = (8 TAB "Silver") TAB (16 TAB "Copper"); //BaseWep Cost: 2x Iron, 1x Copper, 1x Silver
$EOTW::ItemCrafting["advAmmoRifleItem"] = (16 TAB "Silver") TAB (8 TAB "Copper"); //BaseWep Cost: 4x Wood, 2x Iron, 2x Lead
$EOTW::ItemCrafting["advAmmoMininukeItem"] = (32 TAB "Tritium") TAB (8 TAB "Plutonium");

//Firearms
//T0
$EOTW::ItemCrafting["RecurveBowItem"] = (512 TAB "Wood");
//T1 //Weapons use base cost
$EOTW::ItemCrafting["automaticPistolItem"] = (128 TAB "Iron") TAB (32 TAB "Copper") TAB (48 TAB "Lead");
$EOTW::ItemCrafting["revolverItem"] = (256 TAB "Iron") TAB (48 TAB "Lead") TAB (16 TAB "Silver");
$EOTW::ItemCrafting["singleShotgunItem"] = (2048 TAB "Wood") TAB (128 TAB "Iron") TAB (112 TAB "Gold");
// Basic Machine Rifle = (256 TAB "Iron") TAB (32 TAB "Copper") TAB (16 TAB "Silver");
// Basic Rifle = (2048 TAB "Wood") TAB (256 TAB "Iron") TAB (112 TAB "Lead");
//T2 //Weapons use base cost * 1.5
$EOTW::ItemCrafting["servicePistolItem"] = (196 TAB "Iron") TAB (48 TAB "Copper") TAB (72 TAB "Lead");
$EOTW::ItemCrafting["huntingShotgunItem"] = (3072 TAB "Wood") TAB (196 TAB "Iron") TAB (168 TAB "Gold");
$EOTW::ItemCrafting["brushPistolItem"] = (384 TAB "Iron") TAB (72 TAB "Lead") TAB (24 TAB "Silver");
$EOTW::ItemCrafting["doubleShotgunItem"] = (3072 TAB "Wood") TAB (196 TAB "Iron") TAB (168 TAB "Gold");
//T3 //Weapons use base cost + Iron->Steel, Copper->Rosium, Silver->Electrum, Wood -> Rubber
$EOTW::ItemCrafting["leverShotgunItem"] = (64 TAB "Rubber") TAB (96 TAB "Steel") TAB (112 TAB "Gold");
$EOTW::ItemCrafting["automaticRifleItem"] = (192 TAB "Steel") TAB (128 TAB "Rosium") TAB (128 TAB "Electrum");
$EOTW::ItemCrafting["huntingMagnumItem"] = (192 TAB "Steel") TAB (48 TAB "Lead") TAB (128 TAB "Electrum");
$EOTW::ItemCrafting["leverRifleItem"] = (64 TAB "Rubber") TAB (96 TAB "Steel") TAB (96 TAB "Lead");
//T4 //Weapons use base cost * 1.5 + Iron->Steel, Copper->Rosium, Silver->Electrum, Wood -> Rubber
$EOTW::ItemCrafting["ServiceRifleItem"] = (288 TAB "Steel") TAB (192 TAB "Rosium") TAB (192 TAB "Electrum");
$EOTW::ItemCrafting["riotShotgunItem"] = (96 TAB "Rubber") TAB (144 TAB "Steel") TAB (168 TAB "Gold");
$EOTW::ItemCrafting["combatRifleItem"] = (288 TAB "Steel") TAB (192 TAB "Rosium") TAB (192 TAB "Electrum");
$EOTW::ItemCrafting["huntingRifleItem"] = (96 TAB "Rubber") TAB (288 TAB "Steel") TAB (144 TAB "Lead");
$EOTW::ItemCrafting["fieldRifleItem"] = (96 TAB "Rubber") TAB (288 TAB "Steel") TAB (144 TAB "Lead");
$EOTW::ItemCrafting["machinePistolItem"] = (144 TAB "Steel") TAB (192 TAB "Rosium") TAB (72 TAB "Lead");
//T5 //Weapons use base cost + Iron->Adamantine, Copper->Naturum, Silver->Energium, Wood -> Leather
$EOTW::ItemCrafting["sniperRepeaterItem"] = (128 TAB "Leather") TAB (256 TAB "Adamantine") TAB (112 TAB "Lead");
$EOTW::ItemCrafting["pairedShotgunItem"] = (128 TAB "Leather") TAB (128 TAB "Adamantine") TAB (112 TAB "Gold");
$EOTW::ItemCrafting["assaultRifleItem"] = (256 TAB "Adamantine") TAB (128 TAB "Naturum") TAB (128 TAB "Energium");
//T6 //Special Weapons, uses different crafting cost setup
$EOTW::ItemCrafting["nukeLauncherItem"] = (600 TAB "Boss Essence") TAB (128 TAB "Tritium") TAB (64 TAB "Plutonium");
$EOTW::ItemDescription["nukeLauncherItem"] = "The embodiment of nuclear hellfire. [REQUIRES AMMO!!!]";
$EOTW::ItemCrafting["IonCannonItem"] = (1200 TAB "Boss Essence") TAB (8 TAB "Infinity") TAB (1 TAB "Singularity");
$EOTW::ItemDescription["IonCannonItem"] = "The embodiment of ionic hellfire. [REQUIRES 100,000 EU PER USE!!!]";
//bruh
$EOTW::ItemCrafting["ACNItem"] = (999999 TAB "Adamantine");
$EOTW::ItemDescription["ACNItem"] = "If you are able to obtain this then I probably messed up somewhere.";

//Melee
//T1
$EOTW::ItemCrafting["baseballBatItem"] = (2048 TAB "Wood");
$EOTW::ItemCrafting["spikeBatItem"] = (2048 TAB "Wood") TAB (128 TAB "Iron");
//T2
$EOTW::ItemCrafting["meatcleaverItem"] = (256 TAB "Iron");
$EOTW::ItemCrafting["fryingpanItem"] = (256 TAB "Iron") TAB (32 TAB "Copper");
//T3
$EOTW::ItemCrafting["pipeWrenchItem"] = (192 TAB "Steel");
$EOTW::ItemCrafting["macheteItem"] = (192 TAB "Steel") TAB (16 TAB "Silver");
//T4
$EOTW::ItemCrafting["shovelItem"] = (256 TAB "Rosium");
$EOTW::ItemCrafting["pitchforkItem"] = (256 TAB "Rosium") TAB (48 TAB "Lead");
//T5
$EOTW::ItemCrafting["sledgeHammerItem"] = (128 TAB "Adamantine");
$EOTW::ItemCrafting["kurganItem"] = (128 TAB "Adamantine") TAB (128 TAB "Electrum");

function updateWeaponDamage()
{
    if (isObject(BioRifleProjectile))
        BioRifleProjectile.directDamage = 1;
    if (isObject(acidProjectile))
        acidProjectile.directDamage = 4;
}
schedule(100, 0, "updateWeaponDamage");

package EOTW_WeaponBalancing
{
    function dodgeballProjectile::onCollision(%this,%obj,%col,%fade,%pos,%normal)
    {
        //Play bounce sound and check that we haven't played it too recently
        %obj.playSportBallSound( dodgeballBounceSound );
        
        // do onBallHit event, only call this on bricks obviously
        if( %col.getType() & $TypeMasks::FxBrickObjectType )
            %col.onBallHit( %obj.sourceObject, %obj );
            
        //Kill check
        if(!%obj.hasBounced && %col.getType() & $TypeMasks::PlayerObjectType && minigameCanDamage(%obj.sourceObject, %col) == 1)
        {
            //do minigame checks then kill player use the cannon death image
            //%col.kill();
            %col.damage(%obj, %col.getposition(), 75, $DamageType::CannonBallDirect);
        }
        
        // %speed = vectorLen( %obj.getVelocity() );

        //Pass check
        if( %obj.hasBounced &&  passBallCheck(%obj,%col) )
            return;
        
        %obj.hasBounced = 1;
        Projectile::onCollision(%this,%obj,%col,%fade,%pos,%normal);
    }
};
activatePackage("EOTW_WeaponBalancing");


//Theoretical weapon rework:

//Four different tiers of weapons:
//Basic: Iron/Copper/Silver
//Advanced: Steel/Rosium/Electrum
//Super: Adamantine/Naturum/Energium
//Ultimate: Plutonium/Singularity/Infinity

//Five different types of weapons
//Higher tier gives better firerate, accuracy, and automatic fire.
//All weapons do not need to reload and directly feed from player's materials (to avoid annoying data handling for stored or dropped weapons)
//One type of ammo, Bullet, Shotgun, and Explosive Ammo respectively.
//Melee: Baseball Bat -> Machete -> Claymore -> Phase Blade or something, also switch to projectile melee since raycasts suck with server lag //Cheap high DPS melee
//Bullet: Pistol -> Machine Gun -> LMG -> Minigun //Long range targeting
//Shotgun: Single Barrel -> Combat -> Automatic -> Shard Rifle //Short range targeting
//Rocket: Atlatl -> Grenade L -> Rotary L -> Gyrojet //Crowd control
//Energy: Taser(Slowdown) -> Hellfrost Pistol(Ice/Fire) -> Microwaver(Armor-Breaking) -> ??? //Debuff Infliction/Boss Support
//Unique: Mini-Nuke, Ion-Cannon, Chidori

////Option for multiple ammo types, too much maybe?
//Three Types of ammo for bullet/shotgun/rocket
//Swap between projectiles by pressing light button
//Projectiles are identical between different tiers of weapons
//Could just have 1 type of ammo. DPS will depend on accuracy and firerate of gun.
//Higher tiers give higher velocity and damage
//Bullet: Basic -> Advanced -> Dense
//Shotgun: Hunting -> Militry -> Experimental
//Rocket: Impact -> Explosive -> Nuclear


////Why change the weapon system anyways???
//The current weapon system, while suitable enough, was never intended to be balanced
//into different tiers, despite attempts by me to do so. This new system should give a better and more defined
//Progression system. Furthermore, the guns will feel more integrated into SolarApoc (as they will use crafted materials)
//and won't suffer from various bugs by attempting to attaching limited mag sizes to it.